import seaborn as sns
import matplotlib.pyplot as plt


# Lire les données depuis l'entrée standard
data_1 = {4: {2: {4: {'minimum': 182, 'maximum': 186, 'average': 183, 'amplitude': 189}, 6: {'minimum': 166, 'maximum': 187, 'average': 178, 'amplitude': 378}, 8: {'minimum': 166, 'maximum': 186, 'average': 175, 'amplitude': 384}, 12: {'minimum': 166, 'maximum': 186, 'average': 172, 'amplitude': 577}, 16: {'minimum': 166, 'maximum': 186, 'average': 170, 'amplitude': 771}, 18: {'minimum': 166, 'maximum': 187, 'average': 171, 'amplitude': 955}, 20: {'minimum': 166, 'maximum': 186, 'average': 169, 'amplitude': 966}, 24: {'minimum': 166, 'maximum': 186, 'average': 169, 'amplitude': 1159}, 26: {'minimum': 166, 'maximum': 187, 'average': 170, 'amplitude': 1334}, 28: {'minimum': 166, 'maximum': 186, 'average': 168, 'amplitude': 1352}, 30: {'minimum': 166, 'maximum': 187, 'average': 170, 'amplitude': 1525}, 32: {'minimum': 166, 'maximum': 186, 'average': 168, 'amplitude': 1545}}, 3: {4: {'minimum': 222, 'maximum': 226, 'average': 224, 'amplitude': 228}, 6: {'minimum': 206, 'maximum': 225, 'average': 218, 'amplitude': 462}, 8: {'minimum': 206, 'maximum': 226, 'average': 215, 'amplitude': 464}, 12: {'minimum': 206, 'maximum': 226, 'average': 212, 'amplitude': 699}, 16: {'minimum': 206, 'maximum': 226, 'average': 210, 'amplitude': 934}, 18: {'minimum': 206, 'maximum': 225, 'average': 210, 'amplitude': 1168}, 20: {'minimum': 206, 'maximum': 226, 'average': 209, 'amplitude': 1169}, 24: {'minimum': 206, 'maximum': 226, 'average': 209, 'amplitude': 1404}, 26: {'minimum': 206, 'maximum': 225, 'average': 208, 'amplitude': 1638}, 28: {'minimum': 206, 'maximum': 226, 'average': 208, 'amplitude': 1639}, 30: {'minimum': 206, 'maximum': 225, 'average': 208, 'amplitude': 1873}, 32: {'minimum': 206, 'maximum': 226, 'average': 208, 'amplitude': 1874}}, 4: {4: {'minimum': 265, 'maximum': 265, 'average': 265, 'amplitude': 268}, 6: {'minimum': 246, 'maximum': 265, 'average': 258, 'amplitude': 547}, 8: {'minimum': 246, 'maximum': 265, 'average': 255, 'amplitude': 547}, 12: {'minimum': 246, 'maximum': 265, 'average': 252, 'amplitude': 826}, 16: {'minimum': 246, 'maximum': 265, 'average': 250, 'amplitude': 1105}, 18: {'minimum': 246, 'maximum': 265, 'average': 250, 'amplitude': 1384}, 20: {'minimum': 246, 'maximum': 265, 'average': 249, 'amplitude': 1384}, 24: {'minimum': 246, 'maximum': 265, 'average': 249, 'amplitude': 1663}, 26: {'minimum': 246, 'maximum': 265, 'average': 248, 'amplitude': 1942}, 28: {'minimum': 246, 'maximum': 265, 'average': 248, 'amplitude': 1942}, 30: {'minimum': 246, 'maximum': 265, 'average': 248, 'amplitude': 2221}, 32: {'minimum': 246, 'maximum': 265, 'average': 248, 'amplitude': 2221}}}, 8: {2: {4: {'minimum': 182, 'maximum': 186, 'average': 183, 'amplitude': 189}, 6: {'minimum': 166, 'maximum': 187, 'average': 178, 'amplitude': 422}, 8: {'minimum': 166, 'maximum': 200, 'average': 184, 'amplitude': 468}, 12: {'minimum': 168, 'maximum': 309, 'average': 206, 'amplitude': 677}, 16: {'minimum': 166, 'maximum': 309, 'average': 197, 'amplitude': 872}, 18: {'minimum': 167, 'maximum': 320, 'average': 188, 'amplitude': 1022}, 20: {'minimum': 166, 'maximum': 480, 'average': 210, 'amplitude': 1058}, 24: {'minimum': 166, 'maximum': 480, 'average': 203, 'amplitude': 1255}, 26: {'minimum': 166, 'maximum': 477, 'average': 200, 'amplitude': 1429}, 28: {'minimum': 166, 'maximum': 647, 'average': 218, 'amplitude': 1454}, 30: {'minimum': 166, 'maximum': 492, 'average': 198, 'amplitude': 1481}, 32: {'minimum': 166, 'maximum': 647, 'average': 212, 'amplitude': 1651}}, 3: {4: {'minimum': 222, 'maximum': 226, 'average': 224, 'amplitude': 228}, 6: {'minimum': 206, 'maximum': 226, 'average': 218, 'amplitude': 485}, 8: {'minimum': 206, 'maximum': 230, 'average': 216, 'amplitude': 567}, 12: {'minimum': 206, 'maximum': 230, 'average': 215, 'amplitude': 774}, 16: {'minimum': 206, 'maximum': 230, 'average': 214, 'amplitude': 1031}, 18: {'minimum': 206, 'maximum': 233, 'average': 215, 'amplitude': 1037}, 20: {'minimum': 206, 'maximum': 230, 'average': 214, 'amplitude': 1248}, 24: {'minimum': 206, 'maximum': 402, 'average': 222, 'amplitude': 1495}, 26: {'minimum': 206, 'maximum': 404, 'average': 222, 'amplitude': 1501}, 28: {'minimum': 206, 'maximum': 423, 'average': 227, 'amplitude': 1707}, 30: {'minimum': 206, 'maximum': 568, 'average': 233, 'amplitude': 1789}, 32: {'minimum': 206, 'maximum': 581, 'average': 232, 'amplitude': 1958}}, 4: {4: {'minimum': 265, 'maximum': 265, 'average': 265, 'amplitude': 268}, 6: {'minimum': 260, 'maximum': 266, 'average': 263, 'amplitude': 270}, 8: {'minimum': 246, 'maximum': 270, 'average': 260, 'amplitude': 626}, 12: {'minimum': 246, 'maximum': 271, 'average': 255, 'amplitude': 682}, 16: {'minimum': 246, 'maximum': 274, 'average': 255, 'amplitude': 1159}, 18: {'minimum': 246, 'maximum': 271, 'average': 252, 'amplitude': 1181}, 20: {'minimum': 246, 'maximum': 271, 'average': 252, 'amplitude': 1204}, 24: {'minimum': 246, 'maximum': 473, 'average': 262, 'amplitude': 1701}, 26: {'minimum': 246, 'maximum': 483, 'average': 261, 'amplitude': 1721}, 28: {'minimum': 246, 'maximum': 491, 'average': 260, 'amplitude': 1725}, 30: {'minimum': 246, 'maximum': 506, 'average': 260, 'amplitude': 1981}, 32: {'minimum': 246, 'maximum': 697, 'average': 266, 'amplitude': 2233}}}}

data = {8: {2: {4: {'minimum': 182, 'maximum': 186, 'average': 183, 'amplitude': 189}, 6: {'minimum': 166, 'maximum': 187, 'average': 178, 'amplitude': 422}, 8: {'minimum': 166, 'maximum': 200, 'average': 184, 'amplitude': 468}, 10: {'minimum': 167, 'maximum': 193, 'average': 182, 'amplitude': 637}, 12: {'minimum': 168, 'maximum': 309, 'average': 206, 'amplitude': 677}, 14: {'minimum': 166, 'maximum': 194, 'average': 179, 'amplitude': 772}, 16: {'minimum': 166, 'maximum': 309, 'average': 197, 'amplitude': 872}, 18: {'minimum': 167, 'maximum': 320, 'average': 188, 'amplitude': 1022}, 20: {'minimum': 166, 'maximum': 480, 'average': 210, 'amplitude': 1058}, 24: {'minimum': 166, 'maximum': 480, 'average': 203, 'amplitude': 1255}, 26: {'minimum': 166, 'maximum': 477, 'average': 200, 'amplitude': 1429}, 28: {'minimum': 166, 'maximum': 647, 'average': 218, 'amplitude': 1454}, 30: {'minimum': 166, 'maximum': 492, 'average': 198, 'amplitude': 1481}, 32: {'minimum': 166, 'maximum': 647, 'average': 212, 'amplitude': 1651}}, 3: {4: {'minimum': 222, 'maximum': 226, 'average': 224, 'amplitude': 228}, 6: {'minimum': 206, 'maximum': 226, 'average': 218, 'amplitude': 485}, 8: {'minimum': 206, 'maximum': 230, 'average': 216, 'amplitude': 567}, 10: {'minimum': 206, 'maximum': 233, 'average': 216, 'amplitude': 590}, 12: {'minimum': 206, 'maximum': 230, 'average': 215, 'amplitude': 774}, 14: {'minimum': 206, 'maximum': 230, 'average': 216, 'amplitude': 944}, 16: {'minimum': 206, 'maximum': 230, 'average': 214, 'amplitude': 1031}, 18: {'minimum': 206, 'maximum': 233, 'average': 215, 'amplitude': 1037}, 20: {'minimum': 206, 'maximum': 230, 'average': 214, 'amplitude': 1248}, 24: {'minimum': 206, 'maximum': 402, 'average': 222, 'amplitude': 1495}, 26: {'minimum': 206, 'maximum': 404, 'average': 222, 'amplitude': 1501}, 28: {'minimum': 206, 'maximum': 423, 'average': 227, 'amplitude': 1707}, 30: {'minimum': 206, 'maximum': 568, 'average': 233, 'amplitude': 1789}, 32: {'minimum': 206, 'maximum': 581, 'average': 232, 'amplitude': 1958}}, 4: {4: {'minimum': 265, 'maximum': 265, 'average': 265, 'amplitude': 268}, 6: {'minimum': 260, 'maximum': 266, 'average': 263, 'amplitude': 270}, 8: {'minimum': 246, 'maximum': 270, 'average': 260, 'amplitude': 626}, 10: {'minimum': 246, 'maximum': 271, 'average': 256, 'amplitude': 655}, 12: {'minimum': 246, 'maximum': 271, 'average': 255, 'amplitude': 682}, 14: {'minimum': 246, 'maximum': 269, 'average': 254, 'amplitude': 914}, 16: {'minimum': 246, 'maximum': 274, 'average': 255, 'amplitude': 1159}, 18: {'minimum': 246, 'maximum': 271, 'average': 252, 'amplitude': 1181}, 20: {'minimum': 246, 'maximum': 271, 'average': 252, 'amplitude': 1204}, 24: {'minimum': 246, 'maximum': 473, 'average': 262, 'amplitude': 1701}, 26: {'minimum': 246, 'maximum': 483, 'average': 261, 'amplitude': 1721}, 28: {'minimum': 246, 'maximum': 491, 'average': 260, 'amplitude': 1725}, 30: {'minimum': 246, 'maximum': 506, 'average': 260, 'amplitude': 1981}, 32: {'minimum': 246, 'maximum': 697, 'average': 266, 'amplitude': 2233}}}}


def plot_heatmap(data, warps_number):
    # Transformer les données pour la heatmap
    x_labels = sorted(data[warps_number].keys())
    y_labels = sorted(data[warps_number][x_labels[0]].keys())
    props = sorted(data[warps_number][x_labels[0]][y_labels[0]].keys())
    for p in props:
        heatmap_data = []
        for y in y_labels:
            row = []
            for x in x_labels:
                row.append(data[warps_number][x][y][p])
            heatmap_data.append(row)

        # Créer la heatmap
        sns.heatmap(heatmap_data, annot=True, fmt=".0f", cmap="coolwarm", xticklabels=x_labels, yticklabels=y_labels)
        plt.xlabel("Latence du cache")
        plt.ylabel("Nombre de Warps utilisés par l'application")
        plt.title("Nombre de Warps du GPU : {0}, ".format(warps_number)+p)
        plt.show()


if __name__ == "__main__":
    # Générer les heatmap pour chaque nombre de warp utilisé
    for warps_num in list(data.keys()):
        plot_heatmap(data, warps_num)
